#! /bin/sh
# comment -- print all comments in Java codes

sed -n '
:loop
/^\([^/]*\|\/[^*/]\)*\/\*\([^*]*\|\*[^/]\)*\*\?$/{
    N
    s/\n\s\s*/\n /g
    b loop
}
/^\([^/]*\|\/[^*/]\)*\(\/\*\([^*]*\|\*[^/]\)*\*\/\)\(.*\)/{
    h
    s//\2\n/p
    g
    s//\4/
    b loop
}
/^\([^/]*\|\/[^*/]\)*\(\/\/.*\)/{
    s//\2/p
}
' "$@"
